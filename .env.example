# ==============================================
# SERVER CONFIGURATION
# ==============================================
NODE_ENV=development
PORT=4000
API_URL=http://localhost:4000
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:4000
CORS_ORIGIN=http://localhost:3000

# ==============================================
# DATABASE
# ==============================================
# MySQL/MariaDB Connection String
# Format: mysql://USER:PASSWORD@HOST:PORT/DATABASE?OPTIONS
DATABASE_URL="mysql://root:your_password_here@localhost:3306/your_database_name?connection_limit=10&pool_timeout=20"

# ==============================================
# JWT SECRETS (GENERATE THESE!)
# ==============================================
# To generate secure secrets, run these commands:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# JWT Access Token Secret (64 bytes)
JWT_ACCESS_SECRET=your_jwt_access_secret_64_bytes_here

# JWT Refresh Token Secret (64 bytes)
JWT_REFRESH_SECRET=your_jwt_refresh_secret_64_bytes_here

# ==============================================
# ENCRYPTION (GENERATE THIS!)
# ==============================================
# To generate encryption key, run:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# AES-256 Encryption Key (32 bytes / 64 hex characters)
ENCRYPTION_KEY=your_encryption_key_32_bytes_here

# ==============================================
# OWNER ACCOUNT (CHANGE IN PRODUCTION!)
# ==============================================
# Default owner account created during database seeding
OWNER_USERNAME=owner
OWNER_EMAIL=owner@example.com
OWNER_PASSWORD=change_this_password

# WARNING: Change these immediately in production!
# This account has full system access (Role: OWNER)

# ==============================================
# EMAIL CONFIGURATION
# ==============================================
# SMTP Server Settings
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=465
EMAIL_SECURE=true

# Gmail Configuration:
# 1. Enable 2-Step Verification: https://myaccount.google.com/security
# 2. Generate App Password: https://myaccount.google.com/apppasswords
# 3. Use the 16-character app password below (not your account password)

EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your_16_char_app_password_here
EMAIL_FROM=your-email@gmail.com

# Alternative SMTP Providers:
# - SendGrid: smtp.sendgrid.net (Port 587)
# - Mailgun: smtp.mailgun.org (Port 587)
# - AWS SES: email-smtp.us-east-1.amazonaws.com (Port 587)
# - Postmark: smtp.postmarkapp.com (Port 587)

# ==============================================
# STRIPE CONFIGURATION
# ==============================================
# Get your keys from: https://dashboard.stripe.com/test/apikeys

# Test Mode Keys (for development)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Price IDs (create these in Stripe Dashboard)
STRIPE_BASIC_PRICE_ID=price_basic_plan_id_here
STRIPE_PRO_PRICE_ID=price_pro_plan_id_here
STRIPE_ENTERPRISE_PRICE_ID=price_enterprise_plan_id_here

# Production Keys (uncomment for production)
# STRIPE_SECRET_KEY=sk_live_your_production_secret_key
# STRIPE_PUBLISHABLE_KEY=pk_live_your_production_publishable_key
# STRIPE_WEBHOOK_SECRET=whsec_your_production_webhook_secret

# ==============================================
# RATE LIMITING
# ==============================================
# Time window in milliseconds (default: 1 hour)
RATE_LIMIT_WINDOW_MS=3600000

# Maximum requests per window (general API)
RATE_LIMIT_MAX_REQUESTS=10000

# Maximum requests for auth endpoints
AUTH_RATE_LIMIT_MAX=100

# ==============================================
# OPTIONAL CONFIGURATIONS
# ==============================================

# Logging Level (error, warn, info, debug)
LOG_LEVEL=info

# Database Pool Settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# Session Settings
SESSION_SECRET=your_session_secret_here_min_32_chars
SESSION_MAX_AGE=604800000

# Redis (if using Redis for caching)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_redis_password_here

# Sentry (for error tracking)
# SENTRY_DSN=https://your_sentry_dsn_here@sentry.io/project_id

# ==============================================
# FEATURE FLAGS
# ==============================================
ENABLE_SWAGGER_DOCS=true
ENABLE_GRAPHQL_PLAYGROUND=true
ENABLE_RATE_LIMITING=true
ENABLE_2FA=true
ENABLE_EMAIL_VERIFICATION=true

# ==============================================
# SECURITY SETTINGS
# ==============================================
# Trusted device duration (milliseconds - default: 7 days)
TRUSTED_DEVICE_DURATION=604800000

# Guest access duration (milliseconds - default: 5 hours)
GUEST_ACCESS_DURATION=18000000

# Email verification token expiry (milliseconds - default: 24 hours)
EMAIL_VERIFICATION_EXPIRY=86400000

# ==============================================
# SETUP CHECKLIST
# ==============================================
# ☐ 1. Generate JWT_ACCESS_SECRET (64 bytes)
# ☐ 2. Generate JWT_REFRESH_SECRET (64 bytes)
# ☐ 3. Generate ENCRYPTION_KEY (32 bytes)
# ☐ 4. Configure database connection (DATABASE_URL)
# ☐ 5. Setup email service (EMAIL_* variables)
# ☐ 6. Create Stripe account and get API keys
# ☐ 7. Change default OWNER_* credentials
# ☐ 8. Update CORS_ORIGIN to your frontend URL
# ☐ 9. Run: npm run prisma:generate
# ☐ 10. Run: npm run prisma:migrate
# ☐ 11. Run: npm run prisma:seed
# ☐ 12. Test: npm run dev

# ==============================================
# PRODUCTION CHECKLIST
# ==============================================
# ☐ 1. Set NODE_ENV=production
# ☐ 2. Use strong, unique secrets (regenerate all)
# ☐ 3. Change default owner credentials
# ☐ 4. Use production Stripe keys
# ☐ 5. Configure production database
# ☐ 6. Enable HTTPS
# ☐ 7. Set correct CORS_ORIGIN
# ☐ 8. Configure production SMTP
# ☐ 9. Setup monitoring/logging
# ☐ 10. Enable rate limiting
# ☐ 11. Regular database backups
# ☐ 12. Security audit

# ==============================================
# NOTES
# ==============================================
# - Never commit your actual .env file to Git
# - Keep .env in your .gitignore
# - This .env.example should only contain placeholder values
# - Generate all secrets using crypto.randomBytes()
# - Use different secrets for development and production
# - Rotate secrets regularly in production